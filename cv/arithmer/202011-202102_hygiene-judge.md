# 1. ビル内飲食店エリアの体温計測・人数計測システムの開発／テーブル清潔度表示システムの開発

## 1.1. 目次

- [1. ビル内飲食店エリアの体温計測・人数計測システムの開発／テーブル清潔度表示システムの開発](#1-ビル内飲食店エリアの体温計測人数計測システムの開発テーブル清潔度表示システムの開発)
  - [1.1. 目次](#11-目次)
  - [1.2. プロジェクト概要](#12-プロジェクト概要)
  - [1.3. 期間／規模／役割](#13-期間規模役割)
    - [1.3.1. 補足：本プロジェクトへのアサイン背景](#131-補足本プロジェクトへのアサイン背景)
  - [1.4. 実績](#14-実績)
  - [1.5. 実施内容1：各ハードウェアの設定・管理](#15-実施内容1各ハードウェアの設定管理)
    - [1.5.1. 背景・課題・問題点](#151-背景課題問題点)
    - [1.5.2. 取り組み](#152-取り組み)
    - [1.5.3. 結果](#153-結果)
  - [1.6. 実施内容2：データ収集・分析、AIモデル学習、システムの改修](#16-実施内容2データ収集分析aiモデル学習システムの改修)
    - [1.6.1. 背景・課題・問題点](#161-背景課題問題点)
    - [1.6.2. 取り組み](#162-取り組み)
    - [1.6.3. 結果](#163-結果)
  - [1.7. 実施内容2：社内初のFastAPIを利用したシステム開発](#17-実施内容2社内初のfastapiを利用したシステム開発)
    - [1.7.1. 背景](#171-背景)
    - [1.7.2. 取り組み](#172-取り組み)
    - [1.7.3. 結果](#173-結果)
  - [1.8. 開発言語・使用技術](#18-開発言語使用技術)

## 1.2. プロジェクト概要

- 体温計測システム
  - 発熱者を感知したことを各店舗のタブレットに画像で通知し、注意喚起を行うシステム
- 人数計測システム
  - 来客数を計測し混雑具合をWebサイト等に表示するシステム
- テーブル清潔度表示システム
  - テーブルを正しく清掃できているかを店内のモニターに表示するシステム

## 1.3. 期間／規模／役割

- 2020/11 - 2021/02／3名／メンバー

### 1.3.1. 補足：本プロジェクトへのアサイン背景

- システム稼働場所は徳島。
- システム開発のメイン担当者は東京オフィス勤務のメンバー。
- 徳島オフィス勤務である私が、現地でのハードウェアの設定・管理やトラブル対応を担当することになった。

## 1.4. 実績

- ハードウェア構成の詳細設計、ドキュメント作成
- ハードウェアの機器設置・設定・管理
- 現地でのシステム動作確認・テスト
- トラブルオンサイト対応
- データ収集・分析およびAIモデル学習
- フロントエンド開発
- システムの改修

---

以下、特筆すべき実施内容のみ記載。

## 1.5. 実施内容1：各ハードウェアの設定・管理

### 1.5.1. 背景・課題・問題点

- 東京勤務のシステム開発の担当者が徳島オフィス出張時に行うはずが、COVID-19の影響で中止となった。
- ハードウェア構成の概要図はあったが、詳細な設計図がなかった。

### 1.5.2. 取り組み

- カメラやPC、ルータ、タブレット、ポケットWiFi等のIPアドレスや配線などを定義し、詳細設計図を作成。
- 設定に必要となる手順や設定は設定手順書として整理・作成。

### 1.5.3. 結果

- 構成内容や設定手順を可視化・ドキュメント化したことにより、属人化を解消した。
- 動作確認やトラブル対応のときの正とする設定値を明確化できた。

## 1.6. 実施内容2：データ収集・分析、AIモデル学習、システムの改修

### 1.6.1. 背景・課題・問題点

- 東京勤務のシステム開発の担当者が徳島オフィス出張時に行うはずが、COVID-19の影響で中止となった。
- システムロジックの仕様を把握しておらず、また、仕様に関するドキュメントがなかった。
- 現地で動作確認を行った際、AIの推論結果の精度が不十分であった。

### 1.6.2. 取り組み

当初は、システム開発担当者の「AIモデル再学習で改善する」という指示に従い、以下を実施した。

1. 現状の精度の問題点を洗い出し
2. 1.の問題を解決するために必要なデータを現地環境で収集
3. 収集データの中からAIモデル学習に使用するデータを抽出し、データセットを作成、AIモデル学習
4. 3.で作成したAIモデルを使用した単体テスト・システムテストを実施
5. 1.~4.を繰り返し

しかし、AIモデルの改善のみでは十分な精度向上を図ることができなかった。
私自身がシステムの内部仕様について把握していないため、担当者と十分な議論ができていないと感じ、内部仕様について把握することにした。
このとき、システム仕様に関するドキュメントがないため、ソースコードを閲読した。
その後、システムの仕様における改善策や対処法を提案するだけでなく、実際にプログラミングを行い、改修を行った。

### 1.6.3. 結果

- データセットおよびAIモデルの改善を行うことができた。
- システムの内部仕様を把握することにより、会議の内容をより充実させることができた。
- システム自体の改修を自ら行うことで、システムの質を向上させることができた。
- システムの質向上に貢献し、お客様の満足度を向上させることができた。
- AIの精度向上の難しさ、およびAIの精度が十分でない可能性を考慮した仕様の重要性を学んだ。
- ソースコードを閲読したことで、不具合内容をメンバーに報告する際の質（再現性・考慮など）が向上した。

## 1.7. 実施内容2：社内初のFastAPIを利用したシステム開発

### 1.7.1. 背景

- WebAPIのフレームワークとしてFlaskが採用されていた。
- 本プロジェクトで担当するフロントエンドおよびバックエンドの実装内容が比較的シンプルだったため、技術的に新しいことに挑戦したかった。

### 1.7.2. 取り組み

- FastAPIの公式ドキュメント閲読。
- 必要に応じてFastAPIのGitHub Issueを確認。
- 調査・実装結果をチームメンバーに共有。

### 1.7.3. 結果

- FastAPIの実装ができるようになった。
- 社内でFastAPIが使われる案件が増えた。
  - この案件以降から退職時点まで、WebAPIを実装する際はFastAPIが標準的に採用された。

---

## 1.8. 開発言語・使用技術

メイン言語はPython。

| カテゴリ                   | 使用技術         | 使用目的                                                             |
| -------------------------- | ---------------- | -------------------------------------------------------------------- |
| Google Cloud               | BigQuery         | 人数計測データおよび体温計測データの分析                             |
| Google Cloud               | App Engine       | 人数計測システムのフロントエンドサーバおよびバックエンドサーバの起動 |
| Google Cloud               | Datastore        | 人数計測システムのデータ保持                                         |
| ライブラリ・フレームワーク | OpenCV           | カメラから画像データ取得、画像データの加工                           |
| ライブラリ・フレームワーク | FastAPI          | 人数計測システムのフロントエンドサーバおよびバックエンドサーバ       |
| ライブラリ・フレームワーク | jinja2           | 人数計測システムのWebアプリケーションのテンプレートエンジン          |
| ライブラリ・フレームワーク | google-cloud-xxx | BigQueryやCloud Storageなど、Google Cloudサービスの利用              |
| その他ツール               | Rocket.chat      | 発熱者を感知したことの通知                                           |
| その他ツール               | Slack            | チームメンバーとの情報共有                                           |

※AI関連については未記載。
